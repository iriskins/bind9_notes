BIND - это открытая реализация полнофункционального DNS сервера. Имеется множество необходимых функции: поддержка зон, реализация репликации зон, возможности DDNS и еще много чего интересного. Статья суммирует полученные знания, для того, чтобы в будущем опираться на данный источник при последующем деплое сервера.
## Debian 12
### Установка из debian bookworm репозитория 
``` sh
sudo apt install bind9
```
### Основная конфигурация сервера
Файла конфигурации который мы будем править находиться по пути: `/etc/bind/named.conf.options`. Для дополнительной информации смотри - [options-block-grammar](https://bind9.readthedocs.io/en/v9.20.7/reference.html#options-block-grammar). 
```
acl "trusted" { // указываем лист доверенных сетей
	localhost;
	192.168.1.0/24;
};

options {
	listen-on { any; }; // прослушивает 53 udp порт на 0.0.0.0/0
	listen-on-v6 { none; }; // отключаем работу днс по ip 6 версии
	directory "/var/lib/bind"; // рабочая директория
	recursion yes; // кэшируем и принимаем рекурсивные запросы
	forward only; // указываем, что если днс из листа "forwarders" не ответили на рекурсивные запросы, мы возвращаем клиенту ошибку, а не идем сами отправлять итеративные запросы
	forwarders { // лист днс серверов на которые будем отправлять рекурсивные запросы
		8.8.8.8;
		8.8.4.4;
	};
	allow-query { "trusted"; }; // разрешаем только доверенным сетям отправлять запросы к нашему днс 
	allow-recursion { "trusted"; }; // разрешаем тольок доверреным сетям использовать наш сервер как резолвер
};
```
### Конфигурация зоны
Конфигурационный файл лежит в `/etc/bind/named.conf.local`. Полный пример доступных опции можете найти [zone-block-grammar](https://bind9.readthedocs.io/en/v9.20.7/reference.html#zone-block-grammar)
```
zone "example.ru" {
	type master; // Указываем, что мы держим оригинал базы
	file "db.example.ru"; // указываем путь до файл относительно рабочей директории для хранения зоны
};
```
### Файл базы данных
Создаем файл `/var/lib/bind/db.example.ru`
```
$TTL    604800
@       IN      SOA     ns1.example.ru. admin.example.ru. (
                              0         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL
;
@       IN      NS      ns1.example.ru.
ns1     IN      A       192.168.1.2
```

- `$TTL    604800`: Указывает время жизни в кэше для всех записей в зоне
- `@       IN      SOA     ns1.example.ru. admin.example.ru. (...)`:
	- `@`: Указывает на имя доменной зоны, в нашем случае `example.ru`
	- `IN`: Класс записи, в данном случае это обозначает "internet"
	- `SOA`:  Start of Authority тип ресурсной записи, в котором хранится начальная запись зоны, которая указывает, на каком сервере хранится эталонная информация о доменном имени.
	- `ns1.example.`: Основной главный сервер имен для этой зоны.
	- `admin.example.ru.`: Адрес электронной почты администратора, ответственного за эту зону.
- `(0 ; Serial 604800 ; Refresh 86400 ; Retry 2419200 ; Expire 604800 ; Negative Cache TTL)`:
	- `Serial`: Серийный номер для этой зоны. Если вторичный сервер имен, подчиненный этому, заметит увеличение этого номера, подчиненный предположит, что зона была обновлена, и инициирует передачу зоны.
	- `Refresh`: Количество секунд, по истечении которых вторичные серверы имен должны запрашивать у главного сервера запись SOA для обнаружения изменений зоны.
	- `Retry`: Количество секунд, по истечении которых вторичные серверы имен должны повторить попытку запроса серийного номера у главного сервера, если главный сервер не отвечает.
	- `Expire`: Количество секунд, по истечении которых вторичные серверы имен должны прекратить отвечать на запросы для этой зоны, если главный сервер не отвечает.
	- `Negative Cache TTL`: Количество секунд, которое резолвер будет держать негативный кэш
